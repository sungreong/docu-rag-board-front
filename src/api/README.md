# 검색 API 요구사항

프론트엔드의 고급 검색 기능 지원을 위해 다음과 같은 새로운 API 엔드포인트가 필요합니다.

## 1. 패턴 검색 API

### 엔드포인트: `GET /search/pattern`

### 설명
와일드카드 패턴을 이용한 문서 검색 기능입니다. 문서 제목이나 내용에 특정 패턴이 포함된 문서를 찾습니다.

### 파라미터
- `pattern`: 검색할 패턴 (와일드카드 문자 `*`와 `?` 지원)
  - `*`: 0개 이상의 임의의 문자와 일치
  - `?`: 정확히 1개의 임의의 문자와 일치
- `tags`: (선택) 태그 필터링 (쉼표로 구분된 문자열)
- `sort_by`: (선택) 정렬 기준 (relevant, newest, oldest, title_asc, title_desc)
- `page`: (선택) 페이지 번호
- `limit`: (선택) 한 페이지당 결과 수

### 응답 형식
```json
{
  "results": [
    {
      "id": "문서 ID",
      "title": "문서 제목",
      "summary": "문서 요약",
      "tags": ["태그1", "태그2"],
      "created_at": "생성일",
      "status": "문서 상태",
      "uploader_name": "업로더 이름"
    },
    ...
  ],
  "total": 검색 결과 총 개수,
  "page": 현재 페이지,
  "total_pages": 전체 페이지 수
}
```

### 예시 패턴
- `2023*`: 2023으로 시작하는 모든 문서
- `*보고서`: "보고서"로 끝나는 모든 문서
- `*회의록*`: "회의록"이 포함된 모든 문서
- `회의록_2?23`: "회의록_2"로 시작하고 "23"으로 끝나는 문서 (중간에 한 글자는 아무 문자나 가능)

## 2. 유사 문서명 검색 API

### 엔드포인트: `GET /search/similar-title`

### 설명
입력된 문서명과 유사한(일치하지 않더라도) 문서를 찾는 기능입니다. 퍼지 매칭이나 편집 거리(Levenshtein distance) 알고리즘을 활용하여 유사한 문서명을 가진 문서를 검색합니다.

### 파라미터
- `title`: 검색할 문서 제목
- `tags`: (선택) 태그 필터링 (쉼표로 구분된 문자열)
- `sort_by`: (선택) 정렬 기준 (relevant, newest, oldest, title_asc, title_desc)
- `page`: (선택) 페이지 번호
- `limit`: (선택) 한 페이지당 결과 수
- `threshold`: (선택) 유사도 임계값 (0.0~1.0, 기본값 0.7)

### 응답 형식
```json
{
  "results": [
    {
      "id": "문서 ID",
      "title": "문서 제목",
      "summary": "문서 요약",
      "tags": ["태그1", "태그2"],
      "created_at": "생성일",
      "status": "문서 상태",
      "uploader_name": "업로더 이름",
      "similarity": 유사도 점수(0.0~1.0)
    },
    ...
  ],
  "total": 검색 결과 총 개수,
  "page": 현재 페이지,
  "total_pages": 전체 페이지 수
}
```

## 구현 시 고려사항

1. **성능 최적화**
   - 대용량 데이터에서도 빠른 검색을 위해 적절한 인덱싱 도입
   - 패턴 검색의 경우 정규식 기반으로 구현하되, 성능 최적화 필요

2. **유사도 알고리즘**
   - 유사 문서명 검색 시 다음 알고리즘 중 하나 이상 사용 권장:
     - Levenshtein 거리
     - Jaro-Winkler 거리
     - N-gram 유사도
     - 음소나 초성 기반 유사도 (한글 문서의 경우)

3. **오류 처리**
   - 잘못된 패턴 형식에 대한 적절한 오류 메시지 제공
   - 검색 결과가 없는 경우 빈 배열 반환 (404 아님)

4. **확장성**
   - 검색 필드를 확장할 수 있는 구조 (제목만이 아닌 내용, 메타데이터 등)
   - 새로운 검색 알고리즘 도입이 용이한 구조 